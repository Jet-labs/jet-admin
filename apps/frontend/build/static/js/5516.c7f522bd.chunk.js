"use strict";(self.webpackChunkjetadmin_frontend=self.webpackChunkjetadmin_frontend||[]).push([[5516],{82139:(e,t,r)=>{r.d(t,{J4:()=>l,dW:()=>i,m6:()=>d});var a=r(88739),s=r(33211);const d=async()=>{try{const e=await s.A.get(a.a.APIS.SCHEMA.getSchema());if(e.data&&1==e.data.success)return console.log({response:e.data.schema}),e.data.schema;throw e.data.error?e.data.error:a.a.ERROR_CODES.SERVER_ERROR}catch(e){throw e}},l=async()=>{try{const e=await s.A.get(a.a.APIS.SCHEMA.getSchemaStatistics());if(e.data&&1==e.data.success)return console.log({response:e.data.schemaStatistics}),e.data.schemaStatistics;throw e.data.error?e.data.error:a.a.ERROR_CODES.SERVER_ERROR}catch(e){throw e}},i=async e=>{let{schemaQuery:t}=e;try{const e=await s.A.put(a.a.APIS.SCHEMA.runSchemaQuery(),{schema_query:t});if(e.data&&1==e.data.success)return console.log({response:e.data.result}),e.data.result;throw e.data.error?e.data.error:a.a.ERROR_CODES.SERVER_ERROR}catch(r){throw r}}},13733:(e,t,r)=>{r.d(t,{B:()=>p});var a=r(65043),s=r(72890),d=r(57643),l=r(95043),i=r(67680),o=r(15346),n=r(81747),c=r(26240),h=r(87895),u=r(25196),m=r(70579);const x={javascript:(0,d.javascript)(),json:(0,l.json)(),sql:(0,i.sql)(),pgsql:(0,u.rI)("pgsql")},p=e=>{let{readOnly:t,disabled:r,code:d,setCode:l,language:i="json",height:u="200px",outlined:p=!0,transparent:y=!1,rounded:j=!0}=e;const f=(0,c.A)(),g=(0,a.useRef)(),{themeType:S}=(0,h.i7)();return(0,m.jsx)(s.Ay,{readOnly:t||r,ref:g,value:d,height:u,width:"100%",maxWidth:"1000px",extensions:[x[i]],onChange:l,theme:"dark"==S?n.Ts:o.al,basicSetup:{closeBrackets:!0,indentOnInput:!0},style:{borderWidth:p?1:0,borderColor:f.palette.divider,borderRadius:p?4:0},className:j?"codemirror-editor-rounded":"",indentWithTab:!0})}},55516:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var a=r(26240),s=r(59395),d=r(24056),l=r(65043),i=(r(16082),r(88739)),o=r(70579);var n=r(76639);r(59426),r(17824);r(74117);new Proxy(i.a.POSTGRE_SQL_TYPES_BASE,{get:(e,t)=>t in e&&e[t]}),new Proxy(i.a.POSTGRE_SQL_TYPES_BASE,{get:(e,t)=>t in e&&e[t]}),new DOMRect;var c=r(87895);var h=r(61892);var u=r(42518),m=r(39336),x=r(93747),p=r(47097),y=r(25196),j=r(15346),f=r(81747),g=r(72890),S=(r(68685),r(82139)),b=r(19267),w=r(57946),v=r(87108),R=r(13733);const A=e=>{let{}=e;const t=(0,a.A)(),{themeType:r}=(0,c.i7)(),[i,A]=l.useState(0),[E,C]=(0,l.useState)(""),{isLoading:N,data:O,error:_}=(0,x.I)({queryKey:["REACT_QUERY_KEY_TABLE_SCHEMA"],queryFn:()=>(0,S.m6)(),cacheTime:0,retry:1}),{isPending:T,isSuccess:W,isError:q,error:k,mutate:I,data:P}=(0,p.n)({mutationFn:e=>{let{raw_query:t}=e;return(0,S.dW)({schemaQuery:{raw_query:t}})},retry:!1,onSuccess:e=>{(0,n.qq)("Schema executed successfully")},onError:e=>{(0,n.jx)(e)}});return(0,o.jsxs)(h.HK,{direction:"horizontal",autoSaveId:"pg-schema-update-form-panel-sizes",className:"!flex flex-col justify-start items-stretch w-100",children:[(0,o.jsx)(h.wV,{defaultSize:50,style:{borderRightWidth:1,borderColor:t.palette.divider},children:(0,o.jsxs)(h.HK,{direction:"vertical",autoSaveId:"pg-schema-query-builder-form-panel-sizes",className:"!flex flex-col justify-start items-stretch w-100",children:[(0,o.jsxs)(h.wV,{defaultSize:40,className:"px-3",children:[(0,o.jsx)("div",{className:"w-100 flex-col justify-start items-center py-3",children:(0,o.jsx)(g.Ay,{value:E,height:"200px",extensions:[(0,y.rI)("pgsql")],onChange:C,theme:"dark"==r?f.Ts:j.al,style:{width:"100%",borderWidth:1,borderColor:t.palette.divider,borderRadius:4},className:"codemirror-editor-rounded"})}),(0,o.jsxs)("div",{className:"!flex flex-row justify-between items-center w-100 mt-3",children:[P&&Array.isArray(P)?(0,o.jsx)("span",{children:"Result : ".concat(P.length)}):(0,o.jsx)("span",{}),(0,o.jsx)("div",{className:"!flex flex-row justify-start items-center",children:(0,o.jsx)(u.A,{variant:"outlined",className:"!ml-3",onClick:()=>{I({raw_query:E})},children:"Run query"})})]})]}),(0,o.jsx)(h.WM,{withHandle:!0}),(0,o.jsxs)(h.wV,{defaultSize:60,style:{borderTopWidth:1,borderColor:t.palette.divider},children:[(0,o.jsxs)(s.A,{value:i,onChange:(e,t)=>{A(t)},style:{background:t.palette.background.paper},children:[(0,o.jsx)(d.A,{label:"JSON"}),(0,o.jsx)(d.A,{label:"Raw"}),(0,o.jsx)(d.A,{label:"Data Schema"})]}),(0,o.jsx)(m.A,{style:{width:"100%"}}),(0,o.jsxs)("div",{className:"py-3 w-100 flex-grow h-full px-3",children:[0===i&&(0,o.jsx)(v.a,{data:P||""}),1===i&&(0,o.jsx)(w.O,{data:P||""}),2===i&&(0,o.jsx)(b.J,{data:P})]})]})]})}),(0,o.jsx)(h.WM,{withHandle:!0}),(0,o.jsxs)(h.wV,{defaultSize:50,className:"!overflow-y-scroll",children:[(0,o.jsx)("div",{className:"!w-full !p-1 !pt-2 !px-3",children:(0,o.jsx)("span",{className:"!font-semibold !text-sm",children:"Exising schema"})}),(0,o.jsx)(R.B,{code:O,readOnly:!0,language:"pgsql",rounded:!1,outlined:!1,height:"100%"})]})]})},E=()=>{const[e,t]=(0,l.useState)(0),r=(0,a.A)();return(0,o.jsxs)("div",{className:"flex flex-col justify-start items-stretch w-full h-full",children:[(0,o.jsx)("div",{className:"flex flex-col items-start justify-start p-3 ",style:{background:r.palette.background.default,borderBottomWidth:1,borderColor:r.palette.divider},children:(0,o.jsx)("span",{className:"text-lg font-bold text-start",children:"Table schema editor"})}),(0,o.jsxs)(s.A,{value:e,onChange:(e,r)=>{t(r)},className:"",style:{borderBottomWidth:1,borderColor:r.palette.divider},children:[(0,o.jsx)(d.A,{label:"PS SQL editor",className:"!font-bold !capitalize !py-2 !px-3",sx:{borderWidth:1,minHeight:null,minWidth:null}}),(0,o.jsx)(d.A,{label:"Visual editor (Coming soon!)",className:"!font-bold !capitalize !py-2 !px-3",sx:{borderWidth:1,minHeight:null,minWidth:null}})]}),0===e?(0,o.jsx)(A,{}):null]})}},87108:(e,t,r)=>{r.d(t,{a:()=>c});var a=r(26240),s=r(25196),d=r(15346),l=r(81747),i=r(72890),o=(r(65043),r(68685),r(87895)),n=r(70579);const c=e=>{let{data:t}=e;const r=(0,a.A)(),{themeType:c}=(0,o.i7)();return(0,n.jsx)(i.Ay,{value:JSON.stringify(t,null,2),height:"400px",extensions:[(0,s.rI)("json")],theme:"dark"==c?l.Ts:d.al,style:{width:"100%",borderWidth:1,borderColor:r.palette.divider,borderRadius:4},className:"codemirror-editor-rounded"})}},57946:(e,t,r)=>{r.d(t,{O:()=>n});var a=r(26240),s=r(15346),d=r(81747),l=r(72890),i=(r(65043),r(68685),r(87895)),o=r(70579);const n=e=>{let{data:t}=e;const r=(0,a.A)(),{themeType:n}=(0,i.i7)();return(0,o.jsx)(l.Ay,{value:JSON.stringify(t,null,2),height:"400px",theme:"dark"==n?d.Ts:s.al,style:{width:"100%",borderWidth:1,borderColor:r.palette.divider,borderRadius:4},className:"codemirror-editor-rounded"})}},19267:(e,t,r)=>{r.d(t,{J:()=>u});var a=r(26240),s=r(25196),d=r(15346),l=r(81747),i=r(72890),o=(r(65043),r(68685),r(79314)),n=r.n(o),c=r(87895),h=r(70579);const u=e=>{let{data:t}=e;const r=(0,a.A)(),{themeType:o}=(0,c.i7)(),u=n()(t||{});return(0,h.jsx)(i.Ay,{value:JSON.stringify(u,null,2),height:"400px",theme:"dark"==o?l.Ts:d.al,extensions:[(0,s.rI)("json")],style:{width:"100%",borderWidth:1,borderColor:r.palette.divider,borderRadius:4},className:"codemirror-editor-rounded"})}}}]);
//# sourceMappingURL=5516.c7f522bd.chunk.js.map