"use strict";(self.webpackChunkjet_docs=self.webpackChunkjet_docs||[]).push([[8696],{2895:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=r(4848),s=r(8453);const t={},o="Backend Setup Guide",a={id:"setup/setup-backend",title:"Backend Setup Guide",description:"This guide will walk you through setting up the backend environment for both development and production.",source:"@site/docs/setup/setup-backend.md",sourceDirName:"setup",slug:"/setup/setup-backend",permalink:"/jet-admin-docs/docs/setup/setup-backend",draft:!1,unlisted:!1,editUrl:"https://github.com/jet-labs/jet-admin-docs/tree/main/docs/setup/setup-backend.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Frontend Deployment",permalink:"/jet-admin-docs/docs/setup/setup-frontend"},next:{title:"Application concepts",permalink:"/jet-admin-docs/docs/category/application-concepts"}},l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Local Development Setup",id:"local-development-setup",level:2},{value:"Getting Started",id:"getting-started",level:3},{value:"Environment Configuration",id:"environment-configuration",level:3},{value:"Firebase Configuration",id:"firebase-configuration",level:3},{value:"Database Setup",id:"database-setup",level:3},{value:"Running the Application",id:"running-the-application",level:3},{value:"Production Deployment",id:"production-deployment",level:2},{value:"Environment Preparation",id:"environment-preparation",level:3},{value:"Docker Deployment",id:"docker-deployment",level:3},{value:"Process Management Options",id:"process-management-options",level:3},{value:"Database Seeding (Optional)",id:"database-seeding-optional",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"backend-setup-guide",children:"Backend Setup Guide"}),"\n",(0,i.jsx)(n.p,{children:"This guide will walk you through setting up the backend environment for both development and production."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"Before you begin, ensure you have the following installed:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Node.js"})," (v18 or higher) & ",(0,i.jsx)(n.strong,{children:"npm"})," - ",(0,i.jsx)(n.a,{href:"https://nodejs.org/",children:"Download from nodejs.org"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docker"})," - ",(0,i.jsx)(n.a,{href:"https://www.docker.com/",children:"Download from docker.com"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"PostgreSQL"})," database (local or remote access)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"local-development-setup",children:"Local Development Setup"}),"\n",(0,i.jsx)(n.h3,{id:"getting-started",children:"Getting Started"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Clone the repository"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone <repository_url>\r\ncd apps/backend\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Install dependencies"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:".env"})," file in the root directory of your backend project with the following variables:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dotenv",children:'# Server Configuration\r\nNODE_ENV=development\r\nPORT=8090\r\nEXPRESS_REQUEST_SIZE_LIMIT="5mb"\r\n\r\n# Database Configuration\r\nDATABASE_URL="postgresql://user:pass@localhost:5432/db?schema=public"\r\n\r\n# Authentication\r\nJWT_ACCESS_TOKEN_SECRET="lhflsdcshdlkflkfsldkcksldjljclsd"\r\nJWT_REFRESH_TOKEN_SECRET="lhflsdcshdlkflkfsldkcksldjljclsd"\r\nACCESS_TOKEN_TIMEOUT=900\r\nREFRESH_TOKEN_TIMEOUT="100h"\r\n\r\n# CORS Settings\r\nCORS_WHITELIST="http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:3001,http://localhost:3001"\r\n\r\n# Logging Configuration\r\nSYSLOG_HOST=127.0.0.1\r\nSYSLOG_PORT=514\r\nSYSLOG_PROTOCOL=udp4\r\nSYSLOG_LEVEL="warning"\r\nLOG_LEVEL="info"\r\nLOG_RETENTION=7\r\nLOG_FILE_SIZE=1\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You can copy these settings from ",(0,i.jsx)(n.code,{children:"apps/backend/development.env"})," as a starting point and modify them as needed."]})}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["Be sure to replace the placeholder values with your actual configurations, especially the ",(0,i.jsx)(n.code,{children:"DATABASE_URL"})," and JWT secrets for security purposes."]})}),"\n",(0,i.jsx)(n.h3,{id:"firebase-configuration",children:"Firebase Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"firebase-key.json"})," file in the root directory with the following structure:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "type": "",\r\n    "project_id": "",\r\n    "private_key_id": "",\r\n    "private_key": "",\r\n    "client_email": "",\r\n    "client_id": "",\r\n    "auth_uri": "",\r\n    "token_uri": "",\r\n    "auth_provider_x509_cert_url": "",\r\n    "client_x509_cert_url": "",\r\n    "universe_domain": ""\r\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Fill in your actual Firebase credentials. Never commit this file to your repository."})}),"\n",(0,i.jsx)(n.h3,{id:"database-setup",children:"Database Setup"}),"\n",(0,i.jsx)(n.p,{children:"We use Prisma as our ORM for database management. Set up your database with these commands:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create database schema\r\nnpx prisma migrate dev\r\n\r\n# Open visual database editor (optional)\r\nnpx prisma studio\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The first command applies migrations based on your schema definition in ",(0,i.jsx)(n.code,{children:"prisma/schema.prisma"}),", while the second opens a visual interface to manage your database at ",(0,i.jsx)(n.code,{children:"http://localhost:5555"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"running-the-application",children:"Running the Application"}),"\n",(0,i.jsx)(n.p,{children:"Start the development server with hot-reload enabled:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run dev\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Your API will be available at ",(0,i.jsx)(n.code,{children:"http://localhost:8090"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"production-deployment",children:"Production Deployment"}),"\n",(0,i.jsx)(n.h3,{id:"environment-preparation",children:"Environment Preparation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure all environment variables are properly configured for your production environment"}),"\n",(0,i.jsx)(n.li,{children:"Configure the Firebase credentials as described in the development setup section"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"docker-deployment",children:"Docker Deployment"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Build the Docker image"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build -t backend .\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Run the container"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker run -p 8090:8090 \\\r\n  -e DATABASE_URL="<your_production_db_url>" \\\r\n  -e JWT_ACCESS_TOKEN_SECRET="<secure_token>" \\\r\n  -e JWT_REFRESH_TOKEN_SECRET="<secure_token>" \\\r\n  -e CORS_WHITELIST="<production_domains>" \\\r\n  backend\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"For security, use environment variables rather than hardcoded values in your Docker commands."})}),"\n",(0,i.jsx)(n.h3,{id:"process-management-options",children:"Process Management Options"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 1: Standard Node.js"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm start\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 2: PM2 (Recommended)"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run pm2\n"})}),"\n",(0,i.jsx)(n.p,{children:"PM2 provides enhanced process management, automatic restarts, and monitoring for your production application."}),"\n",(0,i.jsx)(n.h3,{id:"database-seeding-optional",children:"Database Seeding (Optional)"}),"\n",(0,i.jsx)(n.p,{children:"To populate your database with initial data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'docker run -p 8090:8090 \\\r\n  -e SEED_DATABASE=true \\\r\n  -e DATABASE_URL="<your_production_db_url>" \\\r\n  -e JWT_ACCESS_TOKEN_SECRET="<secure_token>" \\\r\n  -e JWT_REFRESH_TOKEN_SECRET="<secure_token>" \\\r\n  -e CORS_WHITELIST="<production_domains>" \\\r\n  backend\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This executes the ",(0,i.jsx)(n.code,{children:"seed.js"})," script located in the ",(0,i.jsx)(n.code,{children:"scripts"})," directory."]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:"If you encounter issues during setup or deployment, check the following:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ensure PostgreSQL is running and accessible"}),"\n",(0,i.jsx)(n.li,{children:"Verify environment variables are correctly set"}),"\n",(0,i.jsx)(n.li,{children:"Check network connectivity for external services"}),"\n",(0,i.jsx)(n.li,{children:"Review logs for specific error messages"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.prisma.io/docs/",children:"Prisma Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/goldbergyoni/nodebestpractices",children:"Node.js Best Practices"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://pm2.keymetrics.io/docs/usage/quick-start/",children:"PM2 Documentation"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var i=r(6540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);