"use strict";(self.webpackChunkjet_docs=self.webpackChunkjet_docs||[]).push([[1120],{7223:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>o,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=t(4848),s=t(8453);const r={},a="API Key Authentication System Documentation",d={id:"auth/api-key-authentication",title:"API Key Authentication System Documentation",description:"1. Introduction",source:"@site/docs/auth/api-key-authentication.md",sourceDirName:"auth",slug:"/auth/api-key-authentication",permalink:"/jet-admin/docs/auth/api-key-authentication",draft:!1,unlisted:!1,editUrl:"https://github.com/jet-labs/jet-admin/tree/main/docs/auth/api-key-authentication.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Auth",permalink:"/jet-admin/docs/category/auth"},next:{title:"Authentication System Documentation",permalink:"/jet-admin/docs/auth/authentication"}},l={},c=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"1.1 Overview",id:"11-overview",level:3},{value:"2. System Architecture",id:"2-system-architecture",level:2},{value:"2.1 Database Schema",id:"21-database-schema",level:3},{value:"2.2 Core Components",id:"22-core-components",level:3},{value:"3. Authentication Workflow",id:"3-authentication-workflow",level:2},{value:"4. API Key Management",id:"4-api-key-management",level:2},{value:"4.1 Management Endpoints",id:"41-management-endpoints",level:3},{value:"4.2 Key Lifecycle Management",id:"42-key-lifecycle-management",level:3},{value:"5. Usage Guidelines",id:"5-usage-guidelines",level:2},{value:"5.1 Authentication Header",id:"51-authentication-header",level:3},{value:"5.2 Permission Inheritance",id:"52-permission-inheritance",level:3},{value:"6. Security Implementation",id:"6-security-implementation",level:2},{value:"6.1 Key Generation",id:"61-key-generation",level:3},{value:"6.2 Security Features",id:"62-security-features",level:3},{value:"7. Error Handling",id:"7-error-handling",level:2},{value:"7.1 Common Error Codes",id:"71-common-error-codes",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"api-key-authentication-system-documentation",children:"API Key Authentication System Documentation"}),"\n",(0,i.jsx)(n.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,i.jsx)(n.h3,{id:"11-overview",children:"1.1 Overview"}),"\n",(0,i.jsx)(n.p,{children:"Secure authentication system for programmatic API access using tenant-specific API keys with role-based permission inheritance."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-system-architecture",children:"2. System Architecture"}),"\n",(0,i.jsx)(n.h3,{id:"21-database-schema",children:"2.1 Database Schema"}),"\n",(0,i.jsx)(n.mermaid,{value:"erDiagram\n    tblAPIKeys {\n        string apiKeyID PK\n        string tenantID FK\n        string keyHash\n        string keyName\n        datetime createdDate\n        datetime expiryDate\n        bool isActive\n    }\n    \n    tblAPIKeyRoleMappings {\n        string mappingID PK\n        string apiKeyID FK\n        string roleID FK\n    }"}),"\n",(0,i.jsx)(n.h3,{id:"22-core-components",children:"2.2 Core Components"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Component"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API Key Service"}),(0,i.jsx)(n.td,{children:"Handles CRUD operations, role mapping, and transaction management"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Authentication Middleware"}),(0,i.jsx)(n.td,{children:"Validates keys, extracts user context, and enforces permissions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"API Key Controller"}),(0,i.jsx)(n.td,{children:"Manages REST endpoints and request/response handling"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-authentication-workflow",children:"3. Authentication Workflow"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client\n    participant Backend\n    participant Database\n    \n    Client->>Backend: API Request (with Authentication header)\n    Backend->>Database: Validate Key + Get Tenant/Roles\n    alt Valid Key\n        Database--\x3e>Backend: Key Details + Roles\n        Backend->>Backend: Set Request Context\n        Backend--\x3e>Client: 200 OK + Response Data\n    else Invalid Key\n        Backend--\x3e>Client: 401 Unauthorized\n    end"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-api-key-management",children:"4. API Key Management"}),"\n",(0,i.jsx)(n.h3,{id:"41-management-endpoints",children:"4.1 Management Endpoints"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Endpoint"}),(0,i.jsx)(n.th,{children:"Method"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/tenants/{tenantID}/apikeys"})}),(0,i.jsx)(n.td,{children:"GET"}),(0,i.jsx)(n.td,{children:"List all API keys"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/tenants/{tenantID}/apikeys"})}),(0,i.jsx)(n.td,{children:"POST"}),(0,i.jsx)(n.td,{children:"Create new API key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/tenants/{tenantID}/apikeys/{apiKeyID}"})}),(0,i.jsx)(n.td,{children:"GET"}),(0,i.jsx)(n.td,{children:"Get key details"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/tenants/{tenantID}/apikeys/{apiKeyID}"})}),(0,i.jsx)(n.td,{children:"PUT"}),(0,i.jsx)(n.td,{children:"Update key configuration"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/tenants/{tenantID}/apikeys/{apiKeyID}"})}),(0,i.jsx)(n.td,{children:"DELETE"}),(0,i.jsx)(n.td,{children:"Disable API key"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"42-key-lifecycle-management",children:"4.2 Key Lifecycle Management"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Creation"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Generate cryptographically secure key (256-bit)"}),"\n",(0,i.jsx)(n.li,{children:"Store key hash (PBKDF2 with HMAC-SHA256)"}),"\n",(0,i.jsx)(n.li,{children:"Set default 90-day expiration"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rotation"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Auto-generate new keys before expiration"}),"\n",(0,i.jsx)(n.li,{children:"Maintain legacy key validity for 7 days"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Revocation"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Immediate disablement via DELETE endpoint"}),"\n",(0,i.jsx)(n.li,{children:"Global invalidation within 60 seconds"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-usage-guidelines",children:"5. Usage Guidelines"}),"\n",(0,i.jsx)(n.h3,{id:"51-authentication-header",children:"5.1 Authentication Header"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /api/v1/resources HTTP/1.1\nHost: api.example.com\nAuthorization: api_key sk_live_12ab34cd56ef78gh90ij12kl34mn56op\n"})}),"\n",(0,i.jsx)(n.h3,{id:"52-permission-inheritance",children:"5.2 Permission Inheritance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// Example role mapping\n{\n  "apiKeyID": "key_12345",\n  "roles": [\n    "tenant.admin",\n    "global.monitoring"\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-security-implementation",children:"6. Security Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"61-key-generation",children:"6.1 Key Generation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const generateAPIKey = () => {\n  const buffer = crypto.randomBytes(32);\n  return buffer.toString('base64url');\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"62-security-features",children:"6.2 Security Features"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"Implementation Details"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Tenant Isolation"}),(0,i.jsx)(n.td,{children:"Mandatory tenantID in all requests"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rate Limiting"}),(0,i.jsx)(n.td,{children:"1000 requests/minute/key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Audit Logging"}),(0,i.jsx)(n.td,{children:"Full request metadata capture"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Key Hashing"}),(0,i.jsx)(n.td,{children:"Argon2id with 64MB memory cost"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-error-handling",children:"7. Error Handling"}),"\n",(0,i.jsx)(n.h3,{id:"71-common-error-codes",children:"7.1 Common Error Codes"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Code"}),(0,i.jsx)(n.th,{children:"Scenario"}),(0,i.jsx)(n.th,{children:"Resolution"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"401"}),(0,i.jsx)(n.td,{children:"Invalid/missing API key"}),(0,i.jsx)(n.td,{children:"Verify key header format"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"403"}),(0,i.jsx)(n.td,{children:"Insufficient permissions"}),(0,i.jsx)(n.td,{children:"Check role assignments"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"429"}),(0,i.jsx)(n.td,{children:"Rate limit exceeded"}),(0,i.jsx)(n.td,{children:"Implement exponential backoff"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"500"}),(0,i.jsx)(n.td,{children:"Database connection failure"}),(0,i.jsx)(n.td,{children:"Retry with jittered delay"})]})]})]}),"\n",(0,i.jsx)(n.hr,{})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var i=t(6540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);